<?php
use App\Classes\Http\Request;
use App\Classes\Http\RequestHandler;
use App\Classes\SessionHelper;

// keep project root for relative path file includes
$projectRoot = __DIR__ . '/../';

/*
|--------------------------------------------------------------------------
| Composer autoloader
|--------------------------------------------------------------------------
*/
require $projectRoot . 'vendor/autoload.php';

/*
|--------------------------------------------------------------------------
| Start Session
|--------------------------------------------------------------------------
*/
SessionHelper::start();

/*
|--------------------------------------------------------------------------
| Load the environment variables
|--------------------------------------------------------------------------
*/
loadEnvConfig($projectRoot);

/*
|--------------------------------------------------------------------------
| Instantiate request
|--------------------------------------------------------------------------
*/
$request = new Request();

/*
|--------------------------------------------------------------------------
| Handle request
|--------------------------------------------------------------------------
*/
$response = (new RequestHandler($request))->handleRequest();

/*
|--------------------------------------------------------------------------
| Send response
|--------------------------------------------------------------------------
*/
$response->send();